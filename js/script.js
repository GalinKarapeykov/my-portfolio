// ===== TRANSLATIONS =====
var translations = {
  en: {
    "nav-home": "Home",
    "nav-about": "About",
    "nav-expertise": "Expertise",
    "nav-projects": "Projects",
    "nav-contact": "Contact",
    "hero-badge": "Available for freelance work",
    "hero-title": 'Hey, I\'m <span class="accent">Galin Karapeykov</span>.<br>I build things with code&nbsp;+&nbsp;AI.',
    "hero-desc": "I'm a 16-year-old developer learning AI-assisted development. I use tools like Claude Code and GitHub Copilot to build real websites and web apps \u2014 fast.",
    "hero-btn-projects": "View My Projects",
    "hero-btn-contact": "Get In Touch",
    "about-title": "About Me",
    "about-subtitle": "Who I am and what I do",
    "about-p1": 'I\'m <strong>Galin Karapeykov</strong>, a 16-year-old web developer from Bulgaria. I specialize in <strong>AI-assisted development</strong> \u2014 using tools like Claude Code and GitHub Copilot to build real websites and web applications faster than traditional coding.',
    "about-p2": "I know JavaScript basics and I'm constantly expanding my skills. I build everything from interactive calculators to full portfolio websites, and I'm learning how to turn these skills into freelance work \u2014 building sites for local businesses, landing pages, and simple web apps.",
    "about-p3": 'I\'m currently studying <strong>AI Integrations for Developers</strong> at SoftUni, where I\'m learning to connect to LLM APIs, work with vector databases and embeddings, build RAG systems, and handle multimodal AI (images, speech, audio). Next up is <strong>AI Agent and Workflows</strong> \u2014 covering LangChain agents, memory systems, and multi-agent coordination with LangGraph.',
    "about-p4": "My goal is to combine web development with AI to build tools that actually help people. I don't just let AI write code for me \u2014 I understand every line, debug issues myself, and keep learning the fundamentals.",
    "detail-location": "Location",
    "detail-location-val": "Bulgaria",
    "detail-focus": "Focus",
    "detail-focus-val": "Web Dev + AI",
    "detail-tools": "Tools",
    "detail-learning": "Learning",
    "detail-learning-val": "AI Integrations, LangChain, Next.js",
    "expertise-title": "Expertise",
    "expertise-subtitle": "Technologies I work with",
    "skill-js": "The programming language of the web. Makes sites interactive \u2014 clicks, animations, form validation, and dynamic content.",
    "skill-html": "The skeleton of every webpage. Defines structure \u2014 headings, paragraphs, images, links, and forms. The foundation of the web.",
    "skill-css": "The design language of the web. Controls colors, fonts, layouts, animations, and responsiveness. Makes sites look professional.",
    "projects-title": "My Projects",
    "projects-subtitle": "Things I've built with code and AI",
    "proj-img": "Screenshot coming soon",
    "proj1-title": "AI Calculator",
    "proj1-desc": "My first project \u2014 an interactive calculator built with JavaScript. Handles basic math operations with a clean UI.",
    "proj2-title": "Portfolio Website",
    "proj2-desc": "This website! A responsive, dark-themed portfolio built with vanilla HTML, CSS, and JavaScript using AI-assisted development.",
    "proj-code": "View Code",
    "proj-demo": "Live Demo",
    "proj-more": "More projects coming soon",
    "contact-title": "Get In Touch",
    "contact-subtitle": "Have a project in mind? Let's talk.",
    "form-name": "Name",
    "form-name-ph": "Your name",
    "form-email": "Email",
    "form-message": "Message",
    "form-msg-ph": "Tell me about your project...",
    "form-send": "Send Message",
    "err-name": "Please enter your name",
    "err-email": "Please enter a valid email",
    "err-message": "Please enter a message",
    "success-title": "Message Sent!",
    "success-desc": "Thanks for reaching out. I'll get back to you soon.",
    "form-reset": "Send Another Message",
    "github-btn": "Find me on GitHub",
    "footer": 'Built by <strong>Galin Karapeykov</strong> with AI-Assisted Development &bull; 2026'
  },
  bg: {
    "nav-home": "\u0413\u043b\u0430\u0432\u043d\u0430",
    "nav-about": "\u0417\u0430 \u043c\u0435\u043d",
    "nav-expertise": "\u0423\u043c\u0435\u043d\u0438\u044f",
    "nav-projects": "\u041f\u0440\u043e\u0435\u043a\u0442\u0438",
    "nav-contact": "\u041a\u043e\u043d\u0442\u0430\u043a\u0442",
    "hero-badge": "\u0421\u0432\u043e\u0431\u043e\u0434\u0435\u043d \u0437\u0430 \u0444\u0440\u0438\u043b\u0430\u043d\u0441 \u0440\u0430\u0431\u043e\u0442\u0430",
    "hero-title": '\u0417\u0434\u0440\u0430\u0432\u0435\u0439, \u0430\u0437 \u0441\u044a\u043c <span class="accent">\u0413\u0430\u043b\u0438\u043d \u041a\u0430\u0440\u0430\u043f\u0435\u0439\u043a\u043e\u0432</span>.<br>\u0421\u0442\u0440\u043e\u044f \u043d\u0435\u0449\u0430 \u0441 \u043a\u043e\u0434&nbsp;+&nbsp;AI.',
    "hero-desc": "\u0410\u0437 \u0441\u044a\u043c 16-\u0433\u043e\u0434\u0438\u0448\u0435\u043d \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438\u0441\u0442, \u043a\u043e\u0439\u0442\u043e \u0443\u0447\u0438 AI-\u043f\u043e\u0434\u043f\u043e\u043c\u043e\u0433\u043d\u0430\u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438\u0440\u0430\u043d\u0435. \u0418\u0437\u043f\u043e\u043b\u0437\u0432\u0430\u043c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0438 \u043a\u0430\u0442\u043e Claude Code \u0438 GitHub Copilot \u0437\u0430 \u0438\u0437\u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0440\u0435\u0430\u043b\u043d\u0438 \u0443\u0435\u0431 \u0441\u0430\u0439\u0442\u043e\u0432\u0435 \u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u2014 \u0431\u044a\u0440\u0437\u043e.",
    "hero-btn-projects": "\u0412\u0438\u0436 \u043f\u0440\u043e\u0435\u043a\u0442\u0438\u0442\u0435 \u043c\u0438",
    "hero-btn-contact": "\u0421\u0432\u044a\u0440\u0436\u0438 \u0441\u0435 \u0441 \u043c\u0435\u043d",
    "about-title": "\u0417\u0430 \u043c\u0435\u043d",
    "about-subtitle": "\u041a\u043e\u0439 \u0441\u044a\u043c \u0438 \u043a\u0430\u043a\u0432\u043e \u043f\u0440\u0430\u0432\u044f",
    "about-p1": '\u0410\u0437 \u0441\u044a\u043c <strong>\u0413\u0430\u043b\u0438\u043d \u041a\u0430\u0440\u0430\u043f\u0435\u0439\u043a\u043e\u0432</strong>, 16-\u0433\u043e\u0434\u0438\u0448\u0435\u043d \u0443\u0435\u0431 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438\u0441\u0442 \u043e\u0442 \u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f. \u0421\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0430\u043c \u0441\u0435 \u0432 <strong>AI-\u043f\u043e\u0434\u043f\u043e\u043c\u043e\u0433\u043d\u0430\u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438\u0440\u0430\u043d\u0435</strong> \u2014 \u0438\u0437\u043f\u043e\u043b\u0437\u0432\u0430\u043c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0438 \u043a\u0430\u0442\u043e Claude Code \u0438 GitHub Copilot \u0437\u0430 \u0438\u0437\u0433\u0440\u0430\u0436\u0434\u0430\u043d\u0435 \u043d\u0430 \u0440\u0435\u0430\u043b\u043d\u0438 \u0443\u0435\u0431 \u0441\u0430\u0439\u0442\u043e\u0432\u0435 \u043f\u043e-\u0431\u044a\u0440\u0437\u043e \u043e\u0442 \u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u043e\u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438\u0440\u0430\u043d\u0435.',
    "about-p2": "\u0417\u043d\u0430\u044f \u043e\u0441\u043d\u043e\u0432\u0438\u0442\u0435 \u043d\u0430 JavaScript \u0438 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e \u0440\u0430\u0437\u0448\u0438\u0440\u044f\u0432\u0430\u043c \u0443\u043c\u0435\u043d\u0438\u044f\u0442\u0430 \u0441\u0438. \u0421\u0442\u0440\u043e\u044f \u0432\u0441\u0438\u0447\u043a\u043e \u2014 \u043e\u0442 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0438 \u043a\u0430\u043b\u043a\u0443\u043b\u0430\u0442\u043e\u0440\u0438 \u0434\u043e \u043f\u044a\u043b\u043d\u0438 \u043f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e \u0441\u0430\u0439\u0442\u043e\u0432\u0435, \u0438 \u0443\u0447\u0430 \u043a\u0430\u043a \u0434\u0430 \u043f\u0440\u0435\u0432\u044a\u0440\u043d\u0430 \u0442\u0435\u0437\u0438 \u0443\u043c\u0435\u043d\u0438\u044f \u0432\u044a\u0432 \u0444\u0440\u0438\u043b\u0430\u043d\u0441 \u0440\u0430\u0431\u043e\u0442\u0430.",
    "about-p3": '\u0412 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0443\u0447\u0430 <strong>AI Integrations for Developers</strong> \u0432 SoftUni, \u043a\u044a\u0434\u0435\u0442\u043e \u043d\u0430\u0443\u0447\u0430\u0432\u0430\u043c \u043a\u0430\u043a \u0434\u0430 \u0441\u0435 \u0441\u0432\u044a\u0440\u0437\u0432\u0430\u043c \u0441 LLM API-\u0442\u0430, \u0440\u0430\u0431\u043e\u0442\u044f \u0441 \u0432\u0435\u043a\u0442\u043e\u0440\u043d\u0438 \u0431\u0430\u0437\u0438 \u0434\u0430\u043d\u043d\u0438, \u0441\u0442\u0440\u043e\u044f RAG \u0441\u0438\u0441\u0442\u0435\u043c\u0438 \u0438 \u0440\u0430\u0431\u043e\u0442\u044f \u0441 \u043c\u0443\u043b\u0442\u0438\u043c\u043e\u0434\u0430\u043b\u0435\u043d AI. \u0421\u043b\u0435\u0434\u0432\u0430\u0449\u043e\u0442\u043e \u0435 <strong>AI Agent and Workflows</strong> \u2014 LangChain \u0430\u0433\u0435\u043d\u0442\u0438, \u0441\u0438\u0441\u0442\u0435\u043c\u0438 \u0437\u0430 \u043f\u0430\u043c\u0435\u0442 \u0438 \u043c\u0443\u043b\u0442\u0438-\u0430\u0433\u0435\u043d\u0442\u043d\u0430 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0446\u0438\u044f \u0441 LangGraph.',
    "about-p4": "\u0426\u0435\u043b\u0442\u0430 \u043c\u0438 \u0435 \u0434\u0430 \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u0430\u043c \u0443\u0435\u0431 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438\u0440\u0430\u043d\u0435 \u0441 AI, \u0437\u0430 \u0434\u0430 \u0441\u0442\u0440\u043e\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0438, \u043a\u043e\u0438\u0442\u043e \u043d\u0430\u0438\u0441\u0442\u0438\u043d\u0430 \u043f\u043e\u043c\u0430\u0433\u0430\u0442 \u043d\u0430 \u0445\u043e\u0440\u0430\u0442\u0430. \u041d\u0435 \u043e\u0441\u0442\u0430\u0432\u044f\u043c AI \u0434\u0430 \u043f\u0438\u0448\u0435 \u043a\u043e\u0434 \u0432\u043c\u0435\u0441\u0442\u043e \u043c\u0435\u043d \u2014 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u043c \u0432\u0441\u0435\u043a\u0438 \u0440\u0435\u0434, \u043e\u0442\u0441\u0442\u0440\u0430\u043d\u044f\u0432\u0430\u043c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0441\u0430\u043c \u0438 \u043f\u0440\u043e\u0434\u044a\u043b\u0436\u0430\u0432\u0430\u043c \u0434\u0430 \u0443\u0447\u0430 \u043e\u0441\u043d\u043e\u0432\u0438\u0442\u0435.",
    "detail-location": "\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435",
    "detail-location-val": "\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f",
    "detail-focus": "\u0424\u043e\u043a\u0443\u0441",
    "detail-focus-val": "\u0423\u0435\u0431 + AI",
    "detail-tools": "\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u0438",
    "detail-learning": "\u0423\u0447\u0430",
    "detail-learning-val": "AI \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438, LangChain, Next.js",
    "expertise-title": "\u0423\u043c\u0435\u043d\u0438\u044f",
    "expertise-subtitle": "\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u0441 \u043a\u043e\u0438\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u044f",
    "skill-js": "\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043d\u0438\u044f\u0442 \u0435\u0437\u0438\u043a \u043d\u0430 \u0443\u0435\u0431\u0430. \u041f\u0440\u0430\u0432\u0438 \u0441\u0430\u0439\u0442\u043e\u0432\u0435\u0442\u0435 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0438 \u2014 \u043a\u043b\u0438\u043a\u043e\u0432\u0435, \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0438, \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u043d\u0430 \u0444\u043e\u0440\u043c\u0438 \u0438 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u043d\u043e \u0441\u044a\u0434\u044a\u0440\u0436\u0430\u043d\u0438\u0435.",
    "skill-html": "\u0421\u043a\u0435\u043b\u0435\u0442\u044a\u0442 \u043d\u0430 \u0432\u0441\u044f\u043a\u0430 \u0443\u0435\u0431 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430\u0442\u0430 \u2014 \u0437\u0430\u0433\u043b\u0430\u0432\u0438\u044f, \u043f\u0430\u0440\u0430\u0433\u0440\u0430\u0444\u0438, \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u043b\u0438\u043d\u043a\u043e\u0432\u0435 \u0438 \u0444\u043e\u0440\u043c\u0438. \u041e\u0441\u043d\u043e\u0432\u0430\u0442\u0430 \u043d\u0430 \u0443\u0435\u0431\u0430.",
    "skill-css": "\u0414\u0438\u0437\u0430\u0439\u043d \u0435\u0437\u0438\u043a\u044a\u0442 \u043d\u0430 \u0443\u0435\u0431\u0430. \u041a\u043e\u043d\u0442\u0440\u043e\u043b\u0438\u0440\u0430 \u0446\u0432\u0435\u0442\u043e\u0432\u0435, \u0448\u0440\u0438\u0444\u0442\u043e\u0432\u0435, \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435, \u0430\u043d\u0438\u043c\u0430\u0446\u0438\u0438 \u0438 \u0440\u0435\u0441\u043f\u043e\u043d\u0441\u0438\u0432\u043d\u043e\u0441\u0442. \u041f\u0440\u0430\u0432\u0438 \u0441\u0430\u0439\u0442\u043e\u0432\u0435\u0442\u0435 \u043f\u0440\u043e\u0444\u0435\u0441\u0438\u043e\u043d\u0430\u043b\u043d\u0438.",
    "projects-title": "\u041c\u043e\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0438",
    "projects-subtitle": "\u041d\u0435\u0449\u0430, \u043a\u043e\u0438\u0442\u043e \u0441\u044a\u043c \u0438\u0437\u0433\u0440\u0430\u0434\u0438\u043b \u0441 \u043a\u043e\u0434 \u0438 AI",
    "proj-img": "\u0421\u043d\u0438\u043c\u043a\u0430 \u0441\u043a\u043e\u0440\u043e",
    "proj1-title": "AI \u041a\u0430\u043b\u043a\u0443\u043b\u0430\u0442\u043e\u0440",
    "proj1-desc": "\u041f\u044a\u0440\u0432\u0438\u044f\u0442 \u043c\u0438 \u043f\u0440\u043e\u0435\u043a\u0442 \u2014 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u0435\u043d \u043a\u0430\u043b\u043a\u0443\u043b\u0430\u0442\u043e\u0440, \u0438\u0437\u0433\u0440\u0430\u0434\u0435\u043d \u0441 JavaScript. \u0418\u0437\u0432\u044a\u0440\u0448\u0432\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u0438 \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0441 \u0447\u0438\u0441\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441.",
    "proj2-title": "\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e \u0421\u0430\u0439\u0442",
    "proj2-desc": "\u0422\u043e\u0437\u0438 \u0441\u0430\u0439\u0442! \u0420\u0435\u0441\u043f\u043e\u043d\u0441\u0438\u0432\u043d\u043e \u043f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e \u0441 \u0442\u044a\u043c\u043d\u0430 \u0442\u0435\u043c\u0430, \u0438\u0437\u0433\u0440\u0430\u0434\u0435\u043d\u043e \u0441 HTML, CSS \u0438 JavaScript \u0447\u0440\u0435\u0437 AI-\u043f\u043e\u0434\u043f\u043e\u043c\u043e\u0433\u043d\u0430\u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438\u0440\u0430\u043d\u0435.",
    "proj-code": "\u0412\u0438\u0436 \u043a\u043e\u0434\u0430",
    "proj-demo": "\u0414\u0435\u043c\u043e",
    "proj-more": "\u041e\u0449\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0438 \u0441\u043a\u043e\u0440\u043e",
    "contact-title": "\u0421\u0432\u044a\u0440\u0436\u0438 \u0441\u0435 \u0441 \u043c\u0435\u043d",
    "contact-subtitle": "\u0418\u043c\u0430\u0448 \u043f\u0440\u043e\u0435\u043a\u0442? \u041d\u0430\u043f\u0438\u0448\u0438 \u043c\u0438.",
    "form-name": "\u0418\u043c\u0435",
    "form-name-ph": "\u0422\u0432\u043e\u0435\u0442\u043e \u0438\u043c\u0435",
    "form-email": "\u0418\u043c\u0435\u0439\u043b",
    "form-message": "\u0421\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435",
    "form-msg-ph": "\u0420\u0430\u0437\u043a\u0430\u0436\u0438 \u043c\u0438 \u0437\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0441\u0438...",
    "form-send": "\u0418\u0437\u043f\u0440\u0430\u0442\u0438 \u0441\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435",
    "err-name": "\u041c\u043e\u043b\u044f, \u0432\u044a\u0432\u0435\u0434\u0438 \u0438\u043c\u0435\u0442\u043e \u0441\u0438",
    "err-email": "\u041c\u043e\u043b\u044f, \u0432\u044a\u0432\u0435\u0434\u0438 \u0432\u0430\u043b\u0438\u0434\u0435\u043d \u0438\u043c\u0435\u0439\u043b",
    "err-message": "\u041c\u043e\u043b\u044f, \u0432\u044a\u0432\u0435\u0434\u0438 \u0441\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435",
    "success-title": "\u0421\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435\u0442\u043e \u0435 \u0438\u0437\u043f\u0440\u0430\u0442\u0435\u043d\u043e!",
    "success-desc": "\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u044f! \u0429\u0435 \u0441\u0435 \u0441\u0432\u044a\u0440\u0436\u0430 \u0441 \u0442\u0435\u0431 \u0441\u043a\u043e\u0440\u043e.",
    "form-reset": "\u0418\u0437\u043f\u0440\u0430\u0442\u0438 \u043d\u043e\u0432\u043e \u0441\u044a\u043e\u0431\u0449\u0435\u043d\u0438\u0435",
    "github-btn": "\u041d\u0430\u043c\u0435\u0440\u0438 \u043c\u0435 \u0432 GitHub",
    "footer": '\u0418\u0437\u0433\u0440\u0430\u0434\u0435\u043d\u043e \u043e\u0442 <strong>\u0413\u0430\u043b\u0438\u043d \u041a\u0430\u0440\u0430\u043f\u0435\u0439\u043a\u043e\u0432</strong> \u0441 AI-\u043f\u043e\u0434\u043f\u043e\u043c\u043e\u0433\u043d\u0430\u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u0438\u0440\u0430\u043d\u0435 &bull; 2026'
  }
};

// ===== THEME TOGGLE =====
// Switches between dark and light mode, saves preference to localStorage
var themeToggle = document.querySelector('.toggle-theme');
var htmlElement = document.documentElement;

// Load saved theme or default to dark
var savedTheme = localStorage.getItem('theme') || 'dark';
htmlElement.setAttribute('data-theme', savedTheme);

if (themeToggle) {
  themeToggle.addEventListener('click', function () {
    var current = htmlElement.getAttribute('data-theme');
    var next = current === 'dark' ? 'light' : 'dark';
    htmlElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
  });
}

// ===== LANGUAGE TOGGLE =====
// Switches between English and Bulgarian, saves preference to localStorage
var langToggle = document.querySelector('.toggle-lang');
var currentLang = localStorage.getItem('lang') || 'en';

// Apply saved language on page load
function applyLanguage(lang) {
  currentLang = lang;
  var t = translations[lang];
  if (!t) return;

  // Update text content for data-i18n elements
  document.querySelectorAll('[data-i18n]').forEach(function (el) {
    var key = el.getAttribute('data-i18n');
    if (t[key]) {
      el.textContent = t[key];
    }
  });

  // Update HTML content for data-i18n-html elements
  document.querySelectorAll('[data-i18n-html]').forEach(function (el) {
    var key = el.getAttribute('data-i18n-html');
    if (t[key]) {
      el.innerHTML = t[key];
    }
  });

  // Update placeholders for data-i18n-ph elements
  document.querySelectorAll('[data-i18n-ph]').forEach(function (el) {
    var key = el.getAttribute('data-i18n-ph');
    if (t[key]) {
      el.placeholder = t[key];
    }
  });

  // Update the toggle button text to show the OTHER language
  if (langToggle) {
    langToggle.textContent = lang === 'en' ? 'BG' : 'EN';
  }

  // Update the html lang attribute
  htmlElement.setAttribute('lang', lang === 'en' ? 'en' : 'bg');

  localStorage.setItem('lang', lang);
}

// Apply on load
applyLanguage(currentLang);

if (langToggle) {
  langToggle.addEventListener('click', function () {
    var next = currentLang === 'en' ? 'bg' : 'en';
    applyLanguage(next);
  });
}

// ===== MOBILE MENU TOGGLE =====
var menuToggle = document.querySelector('.menu-toggle');
var navLinks = document.querySelector('.nav-links');

if (menuToggle && navLinks) {
  menuToggle.addEventListener('click', function () {
    this.classList.toggle('active');
    navLinks.classList.toggle('open');
  });

  // Close menu when a link is clicked
  navLinks.querySelectorAll('a').forEach(function (link) {
    link.addEventListener('click', function () {
      menuToggle.classList.remove('active');
      navLinks.classList.remove('open');
    });
  });
}

// ===== SMOOTH SCROLLING =====
document.querySelectorAll('a[href^="#"]').forEach(function (anchor) {
  anchor.addEventListener('click', function (e) {
    var targetId = this.getAttribute('href');
    if (targetId === '#') return;

    var target = document.querySelector(targetId);
    if (target) {
      e.preventDefault();
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });
});

// ===== ACTIVE NAV LINK ON SCROLL =====
// Highlights the nav link matching the section currently in view
var sections = document.querySelectorAll('section[id]');
var navLinkItems = document.querySelectorAll('.nav-links a');

function updateActiveNav() {
  var scrollPos = window.scrollY + 120;

  sections.forEach(function (section) {
    var top = section.offsetTop;
    var height = section.offsetHeight;
    var id = section.getAttribute('id');

    if (scrollPos >= top && scrollPos < top + height) {
      navLinkItems.forEach(function (link) {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + id) {
          link.classList.add('active');
        }
      });
    }
  });
}

window.addEventListener('scroll', updateActiveNav);
updateActiveNav();

// ===== SCROLL REVEAL ANIMATION =====
// Elements with class "reveal" fade in when scrolled into view
var revealElements = document.querySelectorAll('.reveal');

if (revealElements.length > 0) {
  var observer = new IntersectionObserver(
    function (entries) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    },
    { threshold: 0.15 }
  );

  revealElements.forEach(function (el) {
    observer.observe(el);
  });
}

// ===== SKILL CARD FLIP =====
// Click a skill card to flip it and show the description on the back
document.querySelectorAll('.skill-box').forEach(function (box) {
  box.addEventListener('click', function () {
    var clicked = this;
    var isFlipped = clicked.classList.contains('flipped');

    // Close other cards instantly (no animation) so they don't disappear
    document.querySelectorAll('.skill-box').forEach(function (other) {
      if (other !== clicked && other.classList.contains('flipped')) {
        var inner = other.querySelector('.skill-inner');
        inner.style.transition = 'none';
        other.classList.remove('flipped');
        // Force browser to apply the instant change, then restore transition
        inner.offsetHeight;
        inner.style.transition = '';
      }
    });

    // Toggle the clicked one (this one animates normally)
    if (!isFlipped) {
      clicked.classList.add('flipped');
    } else {
      clicked.classList.remove('flipped');
    }
  });
});

// ===== CONTACT FORM VALIDATION =====
var contactForm = document.getElementById('contact-form');

if (contactForm) {
  contactForm.addEventListener('submit', function (e) {
    e.preventDefault();
    var isValid = true;

    // Get form fields
    var name = document.getElementById('name');
    var email = document.getElementById('email');
    var message = document.getElementById('message');

    // Clear previous errors
    document.querySelectorAll('.form-group').forEach(function (group) {
      group.classList.remove('error');
    });

    // Validate name
    if (name.value.trim() === '') {
      showError(name);
      isValid = false;
    }

    // Validate email
    if (email.value.trim() === '' || !isValidEmail(email.value.trim())) {
      showError(email);
      isValid = false;
    }

    // Validate message
    if (message.value.trim() === '') {
      showError(message);
      isValid = false;
    }

    // If valid, fade out form then show success
    if (isValid) {
      contactForm.classList.add('hiding');
      setTimeout(function () {
        contactForm.style.display = 'none';
        var success = document.querySelector('.success-message');
        if (success) {
          success.classList.add('show');
        }
      }, 400);
    }
  });
}

// ===== RESET FORM AFTER SUCCESS =====
var resetBtn = document.getElementById('reset-form');

if (resetBtn) {
  resetBtn.addEventListener('click', function () {
    var success = document.querySelector('.success-message');
    if (success) {
      success.classList.remove('show');
    }

    // Clear the form fields and errors
    contactForm.reset();
    contactForm.classList.remove('hiding');
    contactForm.style.display = '';
    document.querySelectorAll('.form-group').forEach(function (group) {
      group.classList.remove('error');
    });
  });
}

function showError(input) {
  var group = input.closest('.form-group');
  group.classList.add('error');
}

function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}
